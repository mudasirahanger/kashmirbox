{"version":3,"sources":["product.js"],"names":["jQuery","document","ready","$","makeExtraOptionsFixed","cw","intPX","css","fp_l","window","width","extraOptions","str","parseFloat","replace","elevateZoom","zoomType","cursor","gallery","galleryActiveClass","sliderContent","html","append","slick","prevArrow","nextArrow","arrows","slidesToShow","slidesToScroll","positionFixed","productDetailSection","scroll","scrollTop","sectionHeight","extraOptionsHeight","windowWidth","Math","abs","fixedTo","offsetTop","on","this","hasClass","removeClass","addClass","quantity","val","isNaN","target","attr","total","kb_shop_currency_symbol","Number","toLocaleString","trigger","data","collapse"],"mappings":"AAAAA,OAAOC,UAAUC,MAAM,SAASC,GA0B9B,SAASC,IACP,IAAIC,EAAKC,EAAMH,EAAE,uCAAuCI,IAAI,UAGxDC,GAFKL,EAAEM,QAAQC,QACNL,GAAM,EACLA,EAAGC,EAAMK,EAAaJ,IAAI,UAAU,EAClDI,EAAaJ,IAAI,YAAaI,EAAaJ,IAAI,UAC/CI,EAAaJ,IAAI,WAAY,SAASA,IAAI,MAAO,IAAIA,IAAI,OAAOC,GAkElE,SAASF,EAAMM,GACb,OAAIA,EAEGC,WAAWD,EAAIE,QAAQ,OADrB,EAjGXX,EAAE,gBAAgBY,aAChBC,SAAW,QACXC,OAAQ,YACRC,QAAU,kBACVC,mBAAoB,WAItB,IAAIC,EAAgBjB,EAAE,oBAAoBkB,OAC1ClB,EAAE,uBAAuBmB,OAAOF,GAChCjB,EAAE,uBAAuBoB,OACvBC,UAAc,sDACdC,UAAc,uDACdC,QAAQ,EACRC,aAAc,EACdC,eAAgB,IAIlB,IAAIjB,EAAeR,EAAE,2CACjB0B,GAAgB,EAChBC,EAAuB3B,EAAE,4BAW7BA,EAAEM,QAAQsB,OAAO,WACf,IAAIC,EAAY7B,EAAEM,QAAQuB,YACtBC,EAAgB3B,EAAMwB,EAAqBvB,IAAI,WAC/C2B,EAAqB5B,EAAMK,EAAaJ,IAAI,WAC5C4B,EAAchC,EAAEM,QAAQC,QAC5B,KAAG0B,KAAKC,IAAIJ,EAAcC,GAAsB,KAAhD,CAGA,IACII,EAAUR,EAAqB,GAAGS,UAAUN,EAAcC,EAC3DC,GAAe,IAChBxB,EAAaJ,IAAI,WAAY,UAAUA,IAAI,MAAO,GAE7CyB,GALS,KAKiBA,GAAaM,GAC1ClC,IACAyB,GAAgB,GAEbA,IACDlB,EAAaJ,IAAI,WAAY,UAAUA,IAAI,MAAO,GAClDsB,GAAgB,MAQxB1B,EAAEF,UAAUuC,GAAG,QAAS,2CAA4C,WAC/DrC,EAAEsC,MAAMC,SAAS,mBAClBvC,EAAEsC,MAAME,YAAY,kBACpBxC,EAAEsC,MAAMG,SAAS,qBAEjBzC,EAAEsC,MAAMG,SAAS,kBACjBzC,EAAEsC,MAAME,YAAY,sBAKxBxC,EAAEF,UAAUuC,GAAG,SAAU,0BAA2B,WAClD,IAAIK,EAAW1C,EAAEsC,MAAMK,MACpBC,MAAMF,KACPA,EAAW,EACX1C,EAAEsC,MAAMK,IAAID,IAEd,IAAIG,EAAS7C,EAAEsC,MAAMQ,KAAK,eAEtBC,EADYrC,WAAWV,EAAE6C,GAAQC,KAAK,oBAClBJ,EACxB1C,EAAE6C,GAAQC,KAAK,aAAcC,GAC7B/C,EAAE6C,GAAQF,IAAIK,wBAAwB,IAAKC,OAAOF,GAAQG,oBAGzDlD,EAAEM,QAAQC,SAAW,MAEtBP,EAAE,yEACDmD,QAAQ,SACTnD,EAAEF,UAAUuC,GACV,QACA,wEACA,WACErC,EAAEA,EAAEsC,MAAMc,KAAK,WAAWC,SAAS","file":"product.js","sourcesContent":["jQuery(document).ready(function($){\n\n  // product image\n  $(\"#product-img\").elevateZoom({\n    zoomType : \"inner\",\n    cursor: \"crosshair\",\n    gallery : 'product-img-gal',\n    galleryActiveClass: 'active', \n  });\n\n  //intialize slider for mobile\n  var sliderContent = $('#product-img-gal').html();\n  $('#product-img-slider').append(sliderContent);\n  $('#product-img-slider').slick({\n    'prevArrow' : '<span class=\"fa fa-chevron-left slide-back\"></span>',\n    'nextArrow' : '<span class=\"fa fa-chevron-right slide-next\"></span>',\n    arrows: true,\n    slidesToShow: 1,\n    slidesToScroll: 1\n  });\n\n  // fixed box\n  var extraOptions = $('.product-details-section .extra-options');\n  var positionFixed = true;\n  var productDetailSection = $('.product-details-section');\n\n  function makeExtraOptionsFixed() {\n    var cw = intPX($('.product-details-section .container').css('width'));\n    var vw = $(window).width();\n    var mw = (vw-cw) / 2;\n    var fp_l = mw+cw-intPX(extraOptions.css('width'))-3;\n    extraOptions.css('max-width', extraOptions.css('width'));\n    extraOptions.css('position', 'fixed').css('top', 10).css('left',fp_l);\n  }\n\n  $(window).scroll(function(){\n    var scrollTop = $(window).scrollTop();\n    var sectionHeight = intPX(productDetailSection.css('height'));\n    var extraOptionsHeight = intPX(extraOptions.css('height'));\n    var windowWidth = $(window).width();\n    if(Math.abs(sectionHeight-extraOptionsHeight) < 300) {\n      return;\n    }\n    var fixedFrom = 460;\n    var fixedTo = productDetailSection[0].offsetTop+sectionHeight-extraOptionsHeight;\n    if(windowWidth <= 991) {\n      extraOptions.css('position', 'static').css('top', 0);\n    } else {\n        if(scrollTop >= fixedFrom && scrollTop <= fixedTo) {\n        makeExtraOptionsFixed();\n        positionFixed = true;\n      } else {\n        if(positionFixed) {\n          extraOptions.css('position', 'static').css('top', 0);\n          positionFixed = false\n        }\n      }\n    }\n    \n  });\n\n  // toggle details\n  $(document).on('click', '.product-details-section .toggle-details', function(){\n    if($(this).hasClass('fa-plus-circle')) {\n      $(this).removeClass('fa-plus-circle');\n      $(this).addClass('fa-minus-circle');\n    } else {\n      $(this).addClass('fa-plus-circle');\n      $(this).removeClass('fa-minus-circle');\n    }\n  });\n\n\n  $(document).on('change', '#product-quantity-input', function(){\n    var quantity = $(this).val();\n    if(isNaN(quantity)) {\n      quantity = 1;\n      $(this).val(quantity);\n    }\n    var target = $(this).attr('data-target');\n    var unitPrice = parseFloat($(target).attr('data-unit-price'));\n    var total = unitPrice * quantity;\n    $(target).attr('data-total', total);\n    $(target).val(kb_shop_currency_symbol+(new Number(total)).toLocaleString());\n  });\n\n  if($(window).width() <= 767) {\n    //collapse description, shipping and seller details on mobile\n    $('.product-page-content .product-details-section .footer-col .title .fa')\n    .trigger('click');\n    $(document).on(\n      'click', \n      '.product-page-content .product-details-section .footer-col .title .fa',\n      function(){\n        $($(this).data('target')).collapse('toggle');\n    });\n  }\n\n  function intPX(str) {\n    if(!str) \n      return 0;\n    return parseFloat(str.replace('px'));\n  }\n\n});\n"]}