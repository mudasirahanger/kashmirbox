jQuery(document).ready(function(t){function a(t){if(!t)return"";var a="";return a+='<div class="offer-item">',a+='<div class="radio-wrap">',a+='<div class="radio radio-primary">',a+='<input id="offer-radio'+t.productId+'" type="radio" value="1" data-quantity="'+t.quantity+'" data-unit-price="'+t.unitPrice+'" data-gst-tax-amount="'+t.taxAmount+'" data-discount-percent="'+t.discountPercent+'" data-product-name="'+t.productName+'" data-kbcode="'+t.kbcode+'" data-product-img="'+t.productImg+'" data-product-id="'+t.productId+'" data-offer-desc="'+t.offerDesc+'">',a+='<label for="offer-radio'+t.productId+'"></label>',a+="</div>",a+="</div>",a+='<div class="item-image"><img src="'+t.productImg+'"></div>',a+='<div class="item-info">',a+="<p>"+t.offerDesc+"</p>",a+="</div>",a+="</div>"}function e(){var a=r.find(".box-products > .product").length;t("#cart-item-count").html(a),a>0?r.find(".empty-cart-msg").addClass("hidden"):r.find(".empty-cart-msg").removeClass("hidden")}function d(){for(var a=r.find(".box-products > .product").length,e=0,d=0,o=1;o<=a;o++){var c=r.find(".box-products > .product:nth-of-type("+o+")"),i=c.find(".price-value").attr("data-unit-price")*c.find(".counter-input input").val(),s=parseFloat(c.find(".discount-value").attr("data-discount-percent"));s>0&&s<=100&&(i-=i/100*s),e+=parseFloat(i),d+=parseFloat(c.find(".tax-value").attr("data-gst-tax-amount"))}t("#kbprice").attr("data-price",e.toFixed(2)),t("#kbprice").html(kb_shop_currency_symbol+e.toFixed(2)),t("#taxAmount").attr("data-price",d.toFixed(2)),t("#taxAmount").html(kb_shop_currency_symbol+d.toFixed(2));var n=(e+d).toFixed(2);t("#cartTotal").attr("data-price",n),t("#cartTotal").html(kb_shop_currency_symbol+n)}var r=t(".cart-content"),o=t("#cart-products-wrapper"),c=r.find(".box-offers .offer-items");t(document).on("change",".cart-content .product .counter-input input",function(){var a=t(this).closest(".product").find(".price-value"),e=parseFloat(t(this).val())*parseFloat(a.attr("data-unit-price"));e=e.toFixed(2),a.html(kb_shop_currency_symbol+e),d()}),t(document).on("click",".cart-content .product .product-delete",function(){var r=t(this).closest(".product");if(isOfferItem=r.eq(0).data("offer"),isOfferItem){var o={unitPrice:r.eq(0).data("unit-price"),taxAmount:r.eq(0).data("gst-tax-amount"),discountPercent:r.eq(0).data("discount-percent"),quantity:r.eq(0).data("quantity"),productName:r.eq(0).data("product-name"),kbcode:r.eq(0).data("kbcode"),productImg:r.eq(0).data("product-img"),offerDesc:r.eq(0).data("offer-desc"),productId:r.eq(0).data("product-id")};offerHtml=a(o),c.append(offerHtml)}t(this).closest(".product").remove(),e(),d()}),t(document).on("change",".cart-content .box-section .offer-item input",function(){var a=parseFloat(t(this).attr("data-unit-price")),r=parseFloat(t(this).attr("data-gst-tax-amount")),c=parseFloat(t(this).attr("data-discount-percent")),i=parseFloat(t(this).attr("data-quantity"));if(isNaN(c)||isNaN(r)||isNaN(a)||isNaN(i))console.error("invalid offer item values");else{var s=(a*i).toFixed(2),n=t(this).attr("data-product-name"),u=t(this).attr("data-kbcode"),p=t(this).attr("data-product-img"),l=t(this).data("offer-desc"),f=t(this).data("product-id"),m="";m+=' <div class="product clearfix" data-offer="true" data-offer-desc="'+l+'" data-quantity="'+i+'" data-unit-price="'+a+'" data-gst-tax-amount="'+r+'" data-discount-percent="'+c+'" data-product-name="'+n+'" data-kbcode="'+u+'" data-product-img="'+p+'" data-product-id="'+f+'">',m+='<div class="product-img"><img src="'+p+'"></div>',m+='<div class="product-info"><span class="name">'+n+'</span><span class="kbcode">'+u+"</span></div>",m+='<div class="product-counter">',m+='<div class="counter-input"><span class="fa fa-minus decrement"></span><span> ',m+='<input class="form-control" type="number" value="'+i+'"></span><span class="fa fa-plus increment"></span></div>',m+="</div>",m+='<div class="product-price"><span class="price-value" data-unit-price="'+a+'">'+kb_shop_currency_symbol+s+'</span><span class="tax-value" data-gst-tax-amount="'+r+'">+ '+kb_shop_currency_symbol+r+' GST</span><span class="discount-value" data-discount-percent="'+c+'">- '+c+"%</span></div>",m+='<div class="product-delete">',m+='<div><span class="fa fa-times"></span></div>',m+="</div>",m+="</div>";var v=t(this);t(this).closest(".offer-item").fadeOut("slow","linear",function(){v.closest(".offer-item").remove(),o.append(m),e(),d()})}}),e(),d()});
//# sourceMappingURL=cart.js.map
